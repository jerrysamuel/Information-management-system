{% load static %}

<script async defer src="https://buttons.github.io/buttons.js"></script>
<script src="{% static 'dist/main.bundle.js' %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.2/datepicker.min.js"></script>
<script>
    // Wait for the DOM to be fully loaded
    document.addEventListener('DOMContentLoaded', function() {
        // Select the message container element
        var messageContainer = document.querySelector('.message-container');

        // Check if the message container element exists
        if (messageContainer) {
            // Set a timeout to hide or remove the message container after 5 seconds (5000 milliseconds)
            setTimeout(function() {
                // Hide or remove the message container
                messageContainer.style.display = 'none'; // Or messageContainer.remove();
            }, 5000); // Adjust the time interval as needed (in milliseconds)
        }
    });
</script>
<script src="{% static 'vendor/js/flowbite.min.js' %}"></script>
    {# If you are using Flowbite's Turbo mode, include this as well: #}
     <script src="{% static 'vendor/js/flowbite.turbo.min.js' %}"></script> 


    {# 3. Your Custom Dark Mode Toggle Logic #}
    {# This remains the same as it's custom JS, not directly related to Flowbite's bundled JS #}
    <script>
        const themeToggleBtn = document.getElementById('theme-toggle');
        const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
        const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

        function initializeTheme() {
            if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                if (themeToggleLightIcon && themeToggleDarkIcon) {
                    themeToggleLightIcon.classList.remove('hidden');
                    themeToggleDarkIcon.classList.add('hidden');
                }
            } else {
                document.documentElement.classList.remove('dark');
                if (themeToggleLightIcon && themeToggleDarkIcon) {
                    themeToggleDarkIcon.classList.remove('hidden');
                    themeToggleLightIcon.classList.add('hidden');
                }
            }
        }
        initializeTheme();

        document.addEventListener('DOMContentLoaded', () => {
            if (themeToggleBtn) {
                themeToggleBtn.addEventListener('click', function() {
                    if (themeToggleDarkIcon && themeToggleLightIcon) {
                        themeToggleDarkIcon.classList.toggle('hidden');
                        themeToggleLightIcon.classList.toggle('hidden');
                    }
                    if (localStorage.getItem('color-theme')) {
                        if (localStorage.getItem('color-theme') === 'light') {
                            document.documentElement.classList.add('dark');
                            localStorage.setItem('color-theme', 'dark');
                        } else {
                            document.documentElement.classList.remove('dark');
                            localStorage.setItem('color-theme', 'light');
                        }
                    } else {
                        if (document.documentElement.classList.contains('dark')) {
                            document.documentElement.classList.remove('dark');
                            localStorage.setItem('color-theme', 'light');
                        } else {
                            document.documentElement.classList.add('dark');
                            localStorage.setItem('color-theme', 'dark');
                        }
                    }
                });
            }
        });
    </script>


    {# 4. Your Custom Sidebar Toggle Logic #}
    {# This also remains the same as it's custom JS. #}
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toggleSidebarMobile = document.getElementById('toggleSidebarMobile');
            const sidebar = document.getElementById('sidebar');
            const toggleSidebarMobileHamburger = document.getElementById('toggleSidebarMobileHamburger');
            const toggleSidebarMobileClose = document.getElementById('toggleSidebarMobileClose');

            if (toggleSidebarMobile && sidebar && toggleSidebarMobileHamburger && toggleSidebarMobileClose) {
                toggleSidebarMobile.addEventListener('click', function() {
                    sidebar.classList.toggle('hidden');
                    toggleSidebarMobileHamburger.classList.toggle('hidden');
                    toggleSidebarMobileClose.classList.toggle('hidden');

                    const sidebarBackdrop = document.getElementById('sidebar-backdrop');
                    if (sidebarBackdrop) {
                        sidebarBackdrop.classList.toggle('hidden');
                    }
                });

                const sidebarBackdrop = document.getElementById('sidebar-backdrop');
                if (sidebarBackdrop) {
                    sidebarBackdrop.addEventListener('click', () => {
                        sidebar.classList.add('hidden');
                        sidebarBackdrop.classList.add('hidden');
                        toggleSidebarMobileHamburger.classList.remove('hidden');
                        toggleSidebarMobileClose.classList.add('hidden');
                    });
                }
            }
        });
    </script>

